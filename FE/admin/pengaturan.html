<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengaturan Sistem - Admin SIAKAD</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="user-profile">
                <img src="../assets/images/user-avatar.png" alt="Avatar Admin">
                <div class="user-info">
                    <h4>Administrator</h4>
                    <span class="role-badge">Admin Sistem</span>
                </div>
            </div>
        </div>

        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="dashboard.html">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="siswa.html">
                        <i class="fas fa-users"></i>
                        <span>Data Siswa</span>
                    </a>
                </li>
                <li>
                    <a href="guru.html">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span>Data Guru</span>
                    </a>
                </li>
                <li>
                    <a href="kelas.html">
                        <i class="fas fa-school"></i>
                        <span>Data Kelas</span>
                    </a>
                </li>
                <li>
                    <a href="mata-pelajaran.html">
                        <i class="fas fa-book"></i>
                        <span>Mata Pelajaran</span>
                    </a>
                </li>
                <li>
                    <a href="jadwal-bk.html">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Jadwal BK</span>
                    </a>
                </li>
                <li class="divider"></li>
                <li class="active">
                    <a href="pengaturan.html">
                        <i class="fas fa-cog"></i>
                        <span>Pengaturan</span>
                    </a>
                </li>
                <li>
                    <a href="../login.html">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Keluar</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <h1>Pengaturan Sistem</h1>
                <p class="breadcrumb">Admin / Pengaturan</p>
            </div>
            <div class="header-right">
                <button class="btn btn-primary" onclick="saveAllSettings()">
                    <i class="fas fa-save"></i> Simpan Semua Perubahan
                </button>
            </div>
        </header>

        <!-- Main Content Container -->
        <div class="content-container">
            <!-- Settings Tabs -->
            <div class="settings-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="showTab('general')">
                        <i class="fas fa-cog"></i> Umum
                    </button>
                    <button class="tab-btn" onclick="showTab('academic')">
                        <i class="fas fa-graduation-cap"></i> Akademik
                    </button>
                    <button class="tab-btn" onclick="showTab('users')">
                        <i class="fas fa-users"></i> Pengguna
                    </button>
                    <button class="tab-btn" onclick="showTab('notifications')">
                        <i class="fas fa-bell"></i> Notifikasi
                    </button>
                    <button class="tab-btn" onclick="showTab('backup')">
                        <i class="fas fa-database"></i> Backup
                    </button>
                    <button class="tab-btn" onclick="showTab('security')">
                        <i class="fas fa-shield-alt"></i> Keamanan
                    </button>
                </div>

                <!-- General Settings -->
                <div class="tab-content active" id="generalTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-school"></i> Informasi Sekolah</h3>
                        <form id="schoolInfoForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="schoolName">Nama Sekolah *</label>
                                    <input type="text" id="schoolName" value="SMA Mishbahul Ulum" required>
                                </div>
                                <div class="form-group">
                                    <label for="schoolCode">NPSN</label>
                                    <input type="text" id="schoolCode" value="20532101">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="schoolAddress">Alamat Sekolah *</label>
                                <textarea id="schoolAddress" rows="2" required>Jl. Pendidikan No. 123, Kota Malang, Jawa Timur</textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="schoolPhone">Telepon</label>
                                    <input type="tel" id="schoolPhone" value="(0341) 123456">
                                </div>
                                <div class="form-group">
                                    <label for="schoolEmail">Email</label>
                                    <input type="email" id="schoolEmail" value="info@smamishbahululum.sch.id">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="schoolWebsite">Website</label>
                                    <input type="url" id="schoolWebsite" value="https://smamishbahululum.sch.id">
                                </div>
                                <div class="form-group">
                                    <label for="timezone">Zona Waktu</label>
                                    <select id="timezone">
                                        <option value="WIB" selected>WIB (UTC+7)</option>
                                        <option value="WITA">WITA (UTC+8)</option>
                                        <option value="WIT">WIT (UTC+9)</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-calendar-alt"></i> Kalender Akademik</h3>
                        <form id="academicCalendarForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="academicYear">Tahun Ajaran *</label>
                                    <select id="academicYear" required>
                                        <option value="2023/2024">2023/2024</option>
                                        <option value="2024/2025" selected>2024/2025</option>
                                        <option value="2025/2026">2025/2026</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="semester">Semester *</label>
                                    <select id="semester" required>
                                        <option value="1" selected>Semester 1 (Ganjil)</option>
                                        <option value="2">Semester 2 (Genap)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="startDate">Tanggal Mulai *</label>
                                    <input type="date" id="startDate" value="2024-07-15" required>
                                </div>
                                <div class="form-group">
                                    <label for="endDate">Tanggal Selesai *</label>
                                    <input type="date" id="endDate" value="2024-12-20" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Hari Libur Nasional</label>
                                <div class="holiday-list">
                                    <div class="holiday-item">
                                        <span>17 Agustus - Hari Kemerdekaan</span>
                                        <button type="button" class="btn-icon btn-danger" onclick="removeHoliday(this)">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <div class="holiday-item">
                                        <span>25 Desember - Hari Natal</span>
                                        <button type="button" class="btn-icon btn-danger" onclick="removeHoliday(this)">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <div class="add-holiday">
                                        <input type="text" id="newHoliday" placeholder="Nama hari libur">
                                        <input type="date" id="holidayDate">
                                        <button type="button" class="btn btn-sm btn-primary" onclick="addHoliday()">
                                            <i class="fas fa-plus"></i> Tambah
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Academic Settings -->
                <div class="tab-content" id="academicTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-chart-line"></i> Nilai dan Penilaian</h3>
                        <form id="gradingForm">
                            <div class="form-group">
                                <label>Sistem Penilaian *</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="gradingSystem" value="kkm" checked>
                                        <span>KKM (Kriteria Ketuntasan Minimal)</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="gradingSystem" value="percentage">
                                        <span>Persentase</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="gradingSystem" value="letter">
                                        <span>Huruf (A, B, C, D, E)</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="passingGrade">Nilai Kelulusan (KKM) *</label>
                                <input type="number" id="passingGrade" min="0" max="100" value="75" step="0.1" required>
                                <small class="form-text">Nilai minimal untuk dinyatakan lulus</small>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quizWeight">Bobot Kuis (%)</label>
                                    <input type="number" id="quizWeight" min="0" max="100" value="20">
                                </div>
                                <div class="form-group">
                                    <label for="assignmentWeight">Bobot Tugas (%)</label>
                                    <input type="number" id="assignmentWeight" min="0" max="100" value="30">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="utsWeight">Bobot UTS (%)</label>
                                    <input type="number" id="utsWeight" min="0" max="100" value="20">
                                </div>
                                <div class="form-group">
                                    <label for="uasWeight">Bobot UAS (%)</label>
                                    <input type="number" id="uasWeight" min="0" max="100" value="30">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="gradeScale">Skala Nilai</label>
                                <div class="grade-scale">
                                    <div class="grade-item">
                                        <span>A</span>
                                        <input type="number" value="90" min="0" max="100"> - 
                                        <input type="number" value="100" min="0" max="100">
                                    </div>
                                    <div class="grade-item">
                                        <span>B</span>
                                        <input type="number" value="80" min="0" max="100"> - 
                                        <input type="number" value="89" min="0" max="100">
                                    </div>
                                    <div class="grade-item">
                                        <span>C</span>
                                        <input type="number" value="70" min="0" max="100"> - 
                                        <input type="number" value="79" min="0" max="100">
                                    </div>
                                    <div class="grade-item">
                                        <span>D</span>
                                        <input type="number" value="60" min="0" max="100"> - 
                                        <input type="number" value="69" min="0" max="100">
                                    </div>
                                    <div class="grade-item">
                                        <span>E</span>
                                        <input type="number" value="0" min="0" max="100"> - 
                                        <input type="number" value="59" min="0" max="100">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-clock"></i> Jadwal dan Waktu</h3>
                        <form id="scheduleForm">
                            <div class="form-group">
                                <label>Jam Pelajaran per Hari</label>
                                <input type="number" id="lessonsPerDay" min="1" max="12" value="8">
                            </div>
                            <div class="form-group">
                                <label>Durasi Jam Pelajaran (menit)</label>
                                <input type="number" id="lessonDuration" min="30" max="120" value="45">
                            </div>
                            <div class="form-group">
                                <label>Jam Masuk</label>
                                <input type="time" id="schoolStart" value="07:00">
                            </div>
                            <div class="form-group">
                                <label>Jam Pulang</label>
                                <input type="time" id="schoolEnd" value="14:30">
                            </div>
                            <div class="form-group">
                                <label>Waktu Istirahat</label>
                                <div class="break-times">
                                    <div class="break-item">
                                        <span>Istirahat 1:</span>
                                        <input type="time" value="09:30"> - 
                                        <input type="time" value="10:00">
                                    </div>
                                    <div class="break-item">
                                        <span>Istirahat 2:</span>
                                        <input type="time" value="12:00"> - 
                                        <input type="time" value="12:30">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- User Settings -->
                <div class="tab-content" id="usersTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-user-cog"></i> Manajemen Pengguna</h3>
                        <div class="user-management">
                            <div class="user-roles">
                                <h4>Role dan Permission</h4>
                                <div class="roles-list">
                                    <div class="role-item">
                                        <div class="role-info">
                                            <h5>Administrator</h5>
                                            <p>Full access ke semua fitur sistem</p>
                                        </div>
                                        <button class="btn btn-sm btn-outline" onclick="editRole('admin')">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                    </div>
                                    <div class="role-item">
                                        <div class="role-info">
                                            <h5>Kepala Sekolah</h5>
                                            <p>Access laporan dan monitoring</p>
                                        </div>
                                        <button class="btn btn-sm btn-outline" onclick="editRole('headmaster')">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                    </div>
                                    <div class="role-item">
                                        <div class="role-info">
                                            <h5>Guru</h5>
                                            <p>Input nilai, absensi, dan materi</p>
                                        </div>
                                        <button class="btn btn-sm btn-outline" onclick="editRole('teacher')">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                    </div>
                                    <div class="role-item">
                                        <div class="role-info">
                                            <h5>BK</h5>
                                            <p>Konseling dan pemantauan siswa</p>
                                        </div>
                                        <button class="btn btn-sm btn-outline" onclick="editRole('bk')">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                    </div>
                                    <div class="role-item">
                                        <div class="role-info">
                                            <h5>Siswa</h5>
                                            <p>Melihat nilai, absensi, dan jadwal</p>
                                        </div>
                                        <button class="btn btn-sm btn-outline" onclick="editRole('student')">
                                            <i class="fas fa-edit"></i> Edit
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="user-import">
                                <h4>Import Pengguna</h4>
                                <div class="import-options">
                                    <div class="import-option">
                                        <i class="fas fa-file-excel"></i>
                                        <div>
                                            <h5>Import dari Excel</h5>
                                            <p>Upload file Excel untuk import massal</p>
                                        </div>
                                        <button class="btn btn-sm btn-primary" onclick="importFromExcel()">
                                            <i class="fas fa-upload"></i> Upload
                                        </button>
                                    </div>
                                    <div class="import-option">
                                        <i class="fas fa-sync-alt"></i>
                                        <div>
                                            <h5>Sinkronisasi Data</h5>
                                            <p>Sinkron data dengan sistem lama</p>
                                        </div>
                                        <button class="btn btn-sm btn-primary" onclick="syncData()">
                                            <i class="fas fa-sync"></i> Sinkron
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-user-plus"></i> Template Akun</h3>
                        <form id="accountTemplateForm">
                            <div class="form-group">
                                <label>Format Username</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="usernameFormat" value="email" checked>
                                        <span>Email</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="usernameFormat" value="nis">
                                        <span>NIS/NIP</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="usernameFormat" value="custom">
                                        <span>Custom</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Password Default</label>
                                <input type="text" id="defaultPassword" value="password123">
                                <small class="form-text">Password awal untuk akun baru</small>
                            </div>
                            <div class="form-group">
                                <label>Paksa Ganti Password Pertama Login</label>
                                <label class="switch">
                                    <input type="checkbox" id="forcePasswordChange" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Masa Aktif Akun (hari)</label>
                                <input type="number" id="accountLifetime" min="1" max="365" value="365">
                                <small class="form-text">Akun akan dinonaktifkan setelah periode ini</small>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Notification Settings -->
                <div class="tab-content" id="notificationsTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-bell"></i> Pengaturan Notifikasi</h3>
                        <form id="notificationForm">
                            <div class="form-group">
                                <label>Channel Notifikasi</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="channels" value="email" checked>
                                        <span>Email</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="channels" value="whatsapp">
                                        <span>WhatsApp</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="channels" value="sms">
                                        <span>SMS</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="channels" value="push">
                                        <span>Push Notification</span>
                                    </label>
                                </div>
                            </div>

                            <div class="notification-types">
                                <h4>Jenis Notifikasi</h4>
                                <div class="notification-item">
                                    <div class="notification-info">
                                        <h5>Absensi Siswa</h5>
                                        <p>Notifikasi ketika siswa tidak hadir</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-info">
                                        <h5>Deadline Nilai</h5>
                                        <p>Pengingat deadline input nilai</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-info">
                                        <h5>Jadwal BK</h5>
                                        <p>Notifikasi jadwal konseling</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="notification-item">
                                    <div class="notification-info">
                                        <h5>Pengumuman Sekolah</h5>
                                        <p>Pengumuman penting dari sekolah</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Template Email</label>
                                <select id="emailTemplate">
                                    <option value="default">Default</option>
                                    <option value="custom">Custom</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Waktu Kirim Notifikasi Harian</label>
                                <input type="time" id="notificationTime" value="07:00">
                            </div>
                        </form>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-envelope"></i> Konfigurasi Email</h3>
                        <form id="emailConfigForm">
                            <div class="form-group">
                                <label>SMTP Server</label>
                                <input type="text" id="smtpServer" value="smtp.gmail.com">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>SMTP Port</label>
                                    <input type="number" id="smtpPort" value="587">
                                </div>
                                <div class="form-group">
                                    <label>Security</label>
                                    <select id="smtpSecurity">
                                        <option value="tls">TLS</option>
                                        <option value="ssl">SSL</option>
                                        <option value="none">None</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Email Pengirim</label>
                                <input type="email" id="senderEmail" value="noreply@smamishbahululum.sch.id">
                            </div>
                            <div class="form-group">
                                <label>Nama Pengirim</label>
                                <input type="text" id="senderName" value="SMA Mishbahul Ulum">
                            </div>
                            <div class="form-group">
                                <label>Username SMTP</label>
                                <input type="text" id="smtpUsername">
                            </div>
                            <div class="form-group">
                                <label>Password SMTP</label>
                                <input type="password" id="smtpPassword">
                            </div>
                            <button type="button" class="btn btn-sm btn-primary" onclick="testEmailConfig()">
                                <i class="fas fa-paper-plane"></i> Test Email
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Backup Settings -->
                <div class="tab-content" id="backupTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-database"></i> Backup Data</h3>
                        <div class="backup-options">
                            <div class="backup-option">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <div>
                                    <h5>Backup Otomatis</h5>
                                    <p>Jadwalkan backup secara otomatis</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="autoBackup" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="backup-schedule">
                                <label>Jadwal Backup</label>
                                <div class="form-row">
                                    <div class="form-group">
                                        <select id="backupFrequency">
                                            <option value="daily">Harian</option>
                                            <option value="weekly" selected>Mingguan</option>
                                            <option value="monthly">Bulanan</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <input type="time" id="backupTime" value="02:00">
                                    </div>
                                    <div class="form-group">
                                        <select id="backupDay" style="display: none;">
                                            <option value="monday">Senin</option>
                                            <option value="sunday">Minggu</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="backup-storage">
                                <label>Lokasi Penyimpanan</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="storage" value="local" checked>
                                        <span>Server Lokal</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="storage" value="google">
                                        <span>Google Drive</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="storage" value="dropbox">
                                        <span>Dropbox</span>
                                    </label>
                                </div>
                            </div>
                            <div class="backup-actions">
                                <button class="btn btn-primary" onclick="createBackup()">
                                    <i class="fas fa-download"></i> Buat Backup Sekarang
                                </button>
                                <button class="btn btn-secondary" onclick="restoreBackup()">
                                    <i class="fas fa-upload"></i> Restore Backup
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-history"></i> Riwayat Backup</h3>
                        <div class="backup-history">
                            <div class="backup-item">
                                <div class="backup-info">
                                    <h5>backup_20240115_0200.zip</h5>
                                    <p>15 Jan 2024, 02:00 • 245 MB</p>
                                </div>
                                <div class="backup-actions">
                                    <button class="btn-icon" onclick="downloadBackup(1)">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="btn-icon" onclick="restoreFromBackup(1)">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                    <button class="btn-icon btn-danger" onclick="deleteBackup(1)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="backup-item">
                                <div class="backup-info">
                                    <h5>backup_20240108_0200.zip</h5>
                                    <p>08 Jan 2024, 02:00 • 240 MB</p>
                                </div>
                                <div class="backup-actions">
                                    <button class="btn-icon" onclick="downloadBackup(2)">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button class="btn-icon" onclick="restoreFromBackup(2)">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                    <button class="btn-icon btn-danger" onclick="deleteBackup(2)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="tab-content" id="securityTab">
                    <div class="settings-card">
                        <h3><i class="fas fa-shield-alt"></i> Keamanan Sistem</h3>
                        <form id="securityForm">
                            <div class="form-group">
                                <label>Login Attempts Limit</label>
                                <input type="number" id="loginAttempts" min="1" max="10" value="5">
                                <small class="form-text">Jumlah maksimum percobaan login yang gagal</small>
                            </div>
                            <div class="form-group">
                                <label>Lockout Duration (minutes)</label>
                                <input type="number" id="lockoutDuration" min="1" max="1440" value="30">
                            </div>
                            <div class="form-group">
                                <label>Session Timeout (minutes)</label>
                                <input type="number" id="sessionTimeout" min="5" max="480" value="30">
                            </div>
                            <div class="form-group">
                                <label>Require Strong Password</label>
                                <label class="switch">
                                    <input type="checkbox" id="strongPassword" checked>
                                    <span class="slider"></span>
                                </label>
                                <small class="form-text">Password harus mengandung huruf besar, kecil, angka, dan simbol</small>
                            </div>
                            <div class="form-group">
                                <label>Password Expiration (days)</label>
                                <input type="number" id="passwordExpiration" min="0" max="365" value="90">
                                <small class="form-text">0 = tidak pernah kadaluarsa</small>
                            </div>
                            <div class="form-group">
                                <label>Enable Two-Factor Authentication</label>
                                <label class="switch">
                                    <input type="checkbox" id="twoFactorAuth">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label>IP Whitelist</label>
                                <textarea id="ipWhitelist" rows="3" placeholder="Masukkan IP yang diizinkan (satu per baris)"></textarea>
                            </div>
                        </form>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-file-contract"></i> Kebijakan Privasi</h3>
                        <form id="privacyForm">
                            <div class="form-group">
                                <label>Show Privacy Policy on Login</label>
                                <label class="switch">
                                    <input type="checkbox" id="showPrivacyPolicy" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Data Retention Period (months)</label>
                                <input type="number" id="dataRetention" min="1" max="120" value="36">
                            </div>
                            <div class="form-group">
                                <label>Allow Data Export</label>
                                <label class="switch">
                                    <input type="checkbox" id="allowDataExport" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Privacy Policy Text</label>
                                <textarea id="privacyPolicyText" rows="6" placeholder="Masukkan teks kebijakan privasi...">
SMA Mishbahul Ulum berkomitmen untuk melindungi privasi data siswa, guru, dan staf. Data yang dikumpulkan hanya digunakan untuk keperluan akademik dan administratif. Kami tidak akan membagikan data pribadi kepada pihak ketiga tanpa persetujuan, kecuali diwajibkan oleh hukum.
                                </textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Danger Zone -->
            <div class="card danger-zone">
                <div class="card-header">
                    <h3><i class="fas fa-exclamation-triangle"></i> Zona Berbahaya</h3>
                </div>
                <div class="card-body">
                    <div class="danger-actions">
                        <div class="danger-item">
                            <div class="danger-info">
                                <h5>Reset Semua Data</h5>
                                <p>Menghapus semua data dan mengembalikan ke pengaturan awal</p>
                            </div>
                            <button class="btn btn-danger" onclick="showResetConfirmation()">
                                <i class="fas fa-redo"></i> Reset Sistem
                            </button>
                        </div>
                        <div class="danger-item">
                            <div class="danger-info">
                                <h5>Hapus Semua Data</h5>
                                <p>Menghapus permanen semua data dari sistem</p>
                            </div>
                            <button class="btn btn-danger" onclick="showDeleteConfirmation()">
                                <i class="fas fa-trash"></i> Hapus Semua
                            </button>
                        </div>
                        <div class="danger-item">
                            <div class="danger-info">
                                <h5>Log Keluar Semua Pengguna</h5>
                                <p>Memaksa semua pengguna untuk keluar dari sistem</p>
                            </div>
                            <button class="btn btn-warning" onclick="logoutAllUsers()">
                                <i class="fas fa-sign-out-alt"></i> Logout Semua
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Reset Confirmation -->
    <div id="resetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Konfirmasi Reset Sistem</h3>
                <span class="close" onclick="closeResetModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="warning-message">
                    <i class="fas fa-exclamation-circle"></i>
                    <div>
                        <h4>PERINGATAN!</h4>
                        <p>Anda akan melakukan reset sistem. Tindakan ini akan:</p>
                        <ul>
                            <li>Menghapus semua data pengguna</li>
                            <li>Menghapus semua data akademik</li>
                            <li>Mengembalikan pengaturan ke default</li>
                            <li>Tidak dapat dibatalkan!</li>
                        </ul>
                    </div>
                </div>
                <div class="confirmation-check">
                    <label class="checkbox-label">
                        <input type="checkbox" id="confirmReset">
                        <span>Saya mengerti konsekuensi dari tindakan ini</span>
                    </label>
                </div>
                <div class="password-verification">
                    <label for="adminPassword">Masukkan Password Admin untuk Konfirmasi:</label>
                    <input type="password" id="adminPassword" placeholder="Password admin">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeResetModal()">Batal</button>
                <button class="btn btn-danger" onclick="performReset()" disabled>
                    <i class="fas fa-redo"></i> Reset Sistem
                </button>
            </div>
        </div>
    </div>

    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/admin-settings.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            
            if (mobileMenuToggle && sidebar) {
                mobileMenuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                    mobileMenuToggle.innerHTML = sidebar.classList.contains('active') 
                        ? '<i class="fas fa-times"></i>' 
                        : '<i class="fas fa-bars"></i>';
                });
            }

            // Show backup day based on frequency
            document.getElementById('backupFrequency').addEventListener('change', function() {
                const backupDay = document.getElementById('backupDay');
                backupDay.style.display = this.value === 'weekly' ? 'block' : 'none';
            });

            // Enable reset button when checkbox is checked
            document.getElementById('confirmReset').addEventListener('change', function() {
                const resetBtn = document.querySelector('#resetModal .btn-danger');
                resetBtn.disabled = !this.checked;
            });
        });

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked button
            event.currentTarget.classList.add('active');
        }

        function saveAllSettings() {
            if (confirm('Simpan semua perubahan pengaturan?')) {
                // Collect all form data
                const settings = {
                    school: collectFormData('schoolInfoForm'),
                    academic: collectFormData('academicCalendarForm'),
                    grading: collectFormData('gradingForm'),
                    schedule: collectFormData('scheduleForm'),
                    account: collectFormData('accountTemplateForm'),
                    notification: collectFormData('notificationForm'),
                    email: collectFormData('emailConfigForm'),
                    security: collectFormData('securityForm'),
                    privacy: collectFormData('privacyForm')
                };

                // Simulate saving
                console.log('Saving settings:', settings);
                alert('Semua pengaturan berhasil disimpan!');
            }
        }

        function collectFormData(formId) {
            const form = document.getElementById(formId);
            const data = {};
            
            if (form) {
                const elements = form.elements;
                for (let element of elements) {
                    if (element.name && element.type !== 'button') {
                        if (element.type === 'checkbox' || element.type === 'radio') {
                            data[element.name] = element.checked;
                        } else {
                            data[element.name || element.id] = element.value;
                        }
                    }
                }
            }
            
            return data;
        }

        function removeHoliday(button) {
            const holidayItem = button.closest('.holiday-item');
            holidayItem.remove();
        }

        function addHoliday() {
            const name = document.getElementById('newHoliday').value;
            const date = document.getElementById('holidayDate').value;
            
            if (!name || !date) {
                alert('Harap isi nama dan tanggal hari libur!');
                return;
            }
            
            const holidayList = document.querySelector('.holiday-list');
            const holidayItem = document.createElement('div');
            holidayItem.className = 'holiday-item';
            holidayItem.innerHTML = `
                <span>${name} - ${formatDate(date)}</span>
                <button type="button" class="btn-icon btn-danger" onclick="removeHoliday(this)">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            holidayList.insertBefore(holidayItem, document.querySelector('.add-holiday'));
            
            // Clear inputs
            document.getElementById('newHoliday').value = '';
            document.getElementById('holidayDate').value = '';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('id-ID', options);
        }

        function editRole(roleId) {
            alert(`Edit role: ${roleId}`);
            // Open role edit modal
        }

        function importFromExcel() {
            alert('Membuka form import Excel...');
            // Open import modal
        }

        function syncData() {
            if (confirm('Sinkronisasi data dengan sistem lama?')) {
                alert('Proses sinkronisasi dimulai...');
                // Implement sync
            }
        }

        function testEmailConfig() {
            alert('Mengirim email test...');
            // Test email configuration
        }

        function createBackup() {
            if (confirm('Buat backup sekarang?')) {
                alert('Proses backup dimulai...');
                // Create backup
            }
        }

        function restoreBackup() {
            alert('Membuka restore backup...');
            // Open restore modal
        }

        function downloadBackup(id) {
            alert(`Download backup #${id}`);
        }

        function restoreFromBackup(id) {
            if (confirm(`Restore dari backup #${id}?`)) {
                alert('Proses restore dimulai...');
            }
        }

        function deleteBackup(id) {
            if (confirm(`Hapus backup #${id}?`)) {
                alert('Backup berhasil dihapus!');
            }
        }

        function showResetConfirmation() {
            document.getElementById('resetModal').style.display = 'block';
        }

        function closeResetModal() {
            document.getElementById('resetModal').style.display = 'none';
            document.getElementById('confirmReset').checked = false;
            document.getElementById('adminPassword').value = '';
        }

        function performReset() {
            const password = document.getElementById('adminPassword').value;
            if (!password) {
                alert('Harap masukkan password admin!');
                return;
            }
            
            if (confirm('Yakin reset sistem? Tindakan ini tidak dapat dibatalkan!')) {
                alert('Sistem sedang direset...');
                closeResetModal();
            }
        }

        function showDeleteConfirmation() {
            if (confirm('HAPUS SEMUA DATA? Tindakan ini PERMANEN dan TIDAK DAPAT DIBATALKAN!')) {
                if (prompt('Ketik "HAPUS" untuk konfirmasi:') === 'HAPUS') {
                    alert('Semua data sedang dihapus...');
                }
            }
        }

        function logoutAllUsers() {
            if (confirm('Logout semua pengguna dari sistem?')) {
                alert('Semua pengguna berhasil logout!');
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };
    </script>
</body>
</html>